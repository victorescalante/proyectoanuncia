{"version":3,"sources":["dropzone-sv-v1.js","map-create-update.js","parallax-index.js","functions.js","files.js","index.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["function dropZone() {\n\n    var clearFormImg    = $('.container_images').html();\n    if($('.content_file').hasClass('content_file')){\n        clearFormImg = $('.content_file').html();\n    }\n\n    var MaxInputs       = 8;\n    var band = 0;\n    var x = $(\".container_images .file\").length; // the var x is the general container\n    var y = x-1; // the var y is the container images create\n\n\n    function load_image() {\n        $('html').on('click','.image', function (event) {\n            $(this).next(\".select_image\").trigger('click');\n        });\n\n    }\n\n    function delete_image() {\n        $('html').on('click','.add-delete ', function (event) {\n\n            var delete_file = $(this).parents('.file');\n\n            if(x==y){\n                band=1;\n            }\n\n            if(confirm('¿eliminar?')){\n                delete_file.fadeOut('fast');\n                delete_file.remove();\n                /**\n                 * Agregar desmanecimiento\n                 * setTimeout(function (){},1000);\n                 */\n                x--;\n                y=x-1;\n            }\n\n            if( (images_exist()==true) && (y==0 && x==1) || band==1) {\n                create_div_img();\n                band=0;\n            }\n\n            event.stopPropagation();\n\n        });\n\n    }\n\n    function load_images_front(){\n\n\n        $(\"html\").on('change','.select_image',function (event) {\n\n            var fileImg =  $(this);\n\n            if(fileImg.parent('.file').hasClass('dragActive')){\n                var temp = 1;\n            }\n\n            var filesSelected = fileImg[0].files[0];\n\n            if (filesSelected) {\n\n                var fileReader = new FileReader();\n\n                fileReader.onload = function(fileLoadedEvent) {\n\n                    var srcData = fileLoadedEvent.target.result; // <--- data: base64\n\n\n                    fileImg.parent('.file').find('.image').css({\n                        'background': 'url('+srcData+')',\n                    });\n\n\n                    if(!temp) {\n\n                        create_div_img();\n\n                    }\n\n                }\n\n                fileReader.readAsDataURL(filesSelected);\n\n                fileImg.parent('.file').addClass('dragActive');\n\n\n            }\n\n\n\n        });\n\n\n    }\n\n    function create_div_img(){\n\n        if(x < MaxInputs)\n        {\n            //add new form img on DOM\n            var newImg = clearFormImg;\n            $('.container_images').append(newImg);\n            $('.content_file').find('.file').unwrap('<div></div>');\n            x++;\n        }\n        y++;\n\n    }\n\n    function images_exist(){\n\n        var val = $('.file').hasClass(\"dragActive\");\n        return val;\n\n    }\n\n    function active_sortable(){\n\n\n        $( \".container_images\" ).sortable({\n            items: '> .dragActive',\n            cursor: \"move\",\n            revert: 100,\n            opacity: 0.5,\n        });\n\n\n        $( \".container_images\" ).disableSelection();\n    }\n\n\n\n    load_image();\n    load_images_front();\n    active_sortable();\n    delete_image();\n\n\n\n\n}","/**\n * Created by victor.escalante on 06/07/16.\n */\nfunction initMap() {\n\n    var myLatLng = {lat: 19.3431244, lng: -99.4210658};\n    var geocoder = new google.maps.Geocoder();\n    var btnAddress = document.getElementById('btnAddress');\n\n\n    var styles = [\n        {\n            \"featureType\": \"road.highway\",\n            \"elementType\": \"geometry.fill\",\n            \"stylers\": [\n                { \"visibility\": \"on\" },\n                { \"saturation\": 45 },\n                { \"lightness\": -10 },\n                { \"gamma\": 0.82 },\n                { \"weight\": 0.8 },\n                { \"color\": \"#f35e2c\" }\n            ]\n        },{\n            \"elementType\": \"geometry.fill\",\n            \"stylers\": [\n                { \"hue\": \"#00f6ff\" }\n            ]\n        }\n    ];\n\n    function createMap() {\n        // Create a map object and specify the DOM element for display.\n        var map = new google.maps.Map(document.getElementById('map'), {\n            center: myLatLng,\n            scrollwheel: false,\n            zoom: 8,\n        });\n\n        return map;\n    }\n\n    function createMarker(map,pos) {\n\n        // Create a marker and set its position.\n        var marker = new google.maps.Marker({\n            map: map,\n            position: pos,\n            draggable: true,\n            title: 'Posición de la marca'\n        });\n\n        return marker;\n    }\n\n    function events(map,marker) {\n\n        google.maps.event.addListener(marker, 'dragend', function () {\n            $positions = getLatAndLong();\n            getAddress($positions);\n            map.setCenter({lat: getLat(), lng: getLong()});\n            codeAddress(marker);\n        });\n\n        google.maps.event.addListener(marker, 'click', function () {\n            $positions = getLatAndLong();\n            getAddress($positions);\n            map.setCenter({lat: getLat(), lng: getLong()});\n            codeAddress(marker);\n        });\n\n        google.maps.event.addDomListener(window, 'resize', function() {\n            map.setCenter(marker.getPosition());\n        });\n\n\n    }\n\n    function events_dom() {\n\n        google.maps.event.addDomListener(btnAddress, 'click', function() {\n            var address_form = $(\".address\").val();\n            if(address_form.length!=0){\n                codeAddress(address_form);\n            }else{\n                alert('Tienes que colocar una dirección');\n            }\n\n        });\n\n    }\n\n    function getLatAndLong() {\n        var lat = marker.getPosition().lat();\n        var long = marker.getPosition().lng();\n        sendFormLatAndLong(lat, long);\n        return lat+\",\"+long;\n    }\n\n    function getLat() {\n        var lat = marker.getPosition().lat();\n        return lat;\n    }\n\n    function getLong() {\n        var long = marker.getPosition().lng();\n        return long;\n    }\n\n    function getAddress(positions) {\n        /* Other solution\n         geocoder.geocode({'location': {lat: 19.4171849, lng: -99.5617849}}, function(results, status) {\n         if (status === google.maps.GeocoderStatus.OK) {\n         if (results[1]) {\n         console.log(results);\n         }\n         }\n         });\n         */\n\n        $.ajax({\n            method: \"GET\",\n            url: \"http://maps.googleapis.com/maps/api/geocode/json?latlng=\"+positions,\n            success: function(resp){\n                $result_address=resp.results[0].formatted_address;\n                sendFormAddress($result_address);\n\n            }\n        });\n    }\n\n    function sendFormLatAndLong(lat, long) {\n\n        $(\".latitude\").val(lat);\n        $(\".longitude\").val(long);\n    }\n\n    function sendFormAddress(address) {\n        $(\".address\").val(address);\n    }\n\n    function codeAddress(address) {\n        geocoder.geocode( { 'address': address}, function(results, status) {\n            if (status === google.maps.GeocoderStatus.OK) {\n                var p_lat = (results[0].geometry.location.lat());\n                var p_long = (results[0].geometry.location.lng());\n                marker.setPosition({lat: p_lat, lng: p_long});\n                map.setCenter({lat: getLat(), lng: getLong()});\n                map.setZoom(16);\n                getLatAndLong();\n            } else {\n                alert(\"Error: \" + status);\n            }\n        });\n    }\n\n\n\n    //search key map in DOM\n\n    element = document.querySelector('#map');\n\n    events_dom();\n\n    if (element) {\n\n        map = createMap();\n        marker = createMarker(map,myLatLng);\n        events(map,marker);\n        map.setOptions({styles: styles});\n\n        var form_lat = $(\".latitude\").val();\n        var form_long = $(\".longitude\").val();\n\n        form_lat_f = parseFloat(form_lat);\n        form_long_f = parseFloat(form_long);\n\n        if(form_lat!='' && form_long!=''){\n            $position = form_lat+\",\"+form_long;\n            getAddress($position);\n            marker.setPosition({lat: form_lat_f, lng: form_long_f});\n            map.setCenter({lat: getLat(), lng: getLong()});\n            map.setZoom(16);\n        }\n\n    }\n\n}\n\n\n","/*\n(function($) {\n\n    $.fn.parallax = function(options) {\n\n        var windowHeight = $(window).height();\n\n        // Establish default settings\n        var settings = $.extend({\n            speed        : 0.15\n        }, options);\n\n        // Iterate over each object in collection\n        return this.each( function() {\n\n            // Save a reference to the element\n            var $this = $(this);\n\n            // Set up Scroll Handler\n            $(document).scroll(function(){\n\n                var scrollTop = $(window).scrollTop();\n                var offset = $this.offset().top;\n                var height = $this.outerHeight();\n\n                // Check if above or below viewport\n                if (offset + height <= scrollTop || offset >= scrollTop + windowHeight) {\n                    return;\n                }\n\n                var yBgPosition = Math.round((offset - scrollTop) * settings.speed);\n\n                // Apply the Y Background Position to Set the Parallax Effect\n                $this.css('background-position', 'center ' + yBgPosition + 'px');\n\n            });\n        });\n    }\n}(jQuery));\n\n$('.bg-1').parallax({\n    speed :\t0.25\n});*/","\n// Functions for ajax\ntoken = $(\"input[name='_token']\").val();\n\n\n/*\n$.ajaxSetup({\n    headers: {\n        'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\n    }\n});\n*/\n\n\nfunction recargarS2(id)\n{\n    $('#municipalities').html('<option value=\"\">Cargando datos ..</option>');\n\n    $.ajax({\n        method: \"GET\",\n        url: \"/sistema/puentes/create/select/\",\n        data: {\n            id: id,\n            _method: token\n        },\n        success: function(resp){\n            $('#municipalities').html(resp)\n        }\n    });\n}\n\n\n\nfunction active_sortable(){\n\n\n    $( \".container_images\" ).sortable({\n        items: '> .dragActive',\n        cursor: \"move\",\n        revert: 100,\n        opacity: 0.5,\n    });\n\n\n    $( \".container_images\" ).disableSelection();\n}\n\n","/**\n * Created by victor.escalante on 06/07/16.\n */\n\nfunction files() {\n\n\n    token = $(\"input[name='_token']\").val();\n\n    var clearFormImg = $('.content_file').html();\n\n    function load_image() {\n        $('html').on('click', '.image', function (event) {\n            $(this).next(\".select_image\").trigger('click');\n        });\n\n    }\n\n    function load_images_front() {\n\n\n        $(\"html\").on('change', '.select_image', function (event) {\n\n            var fileImg = $(this);\n            var id_footbridge = $('#id_footbridge').val();\n            var inputtext = fileImg.next();\n            var inputorder = inputtext.next();\n            console.log(\"Este es el valro de input text \"+inputtext.val());\n            if(inputtext.val()==0){\n                /*crea un nuevo registro */\n                console.log(inputtext);\n                var file = fileImg.context.files[0];\n                var formData = new FormData();\n                formData.append('_token', token);\n                formData.append('id_footbridge', id_footbridge);\n                formData.append('Photo', file);\n\n\n\n\n                $.ajax(send_ajax('POST', '../../images/store', formData))\n                    .done(function (value, status, xhr) {\n\n                        print_file(fileImg);\n                        inputtext.attr('id',value.id);\n                        inputtext.attr('value',value.id);\n                        inputorder.attr('value',value.id);\n\n                    }).fail(function (jqXHR, textStatus, errorThrown) {\n\n                    alert('Error al cargar imagen!!');\n\n                }).always(function () {\n\n\n                });\n\n            }else{\n\n                var update_file = $(this).parents('.file');\n                var input_with_id = update_file.find('.id_img');\n                var id_update = input_with_id.val();\n                console.log(\"valor del id_img \"+id_update);\n                /* actualiza un registro */\n                console.log(inputtext);\n                var file = fileImg.context.files[0];\n                var formData3 = new FormData();\n                formData3.append('_token', token);\n                formData3.append('_method', 'patch');\n                formData3.append('Photo', file);\n                formData3.append('id', id_update);\n\n\n\n\n                $.ajax(send_ajax('POST', '../../images/update', formData3))\n                    .done(function (value, status, xhr) {\n\n                        print_file(fileImg);\n                        inputtext.attr('id',value.id);\n                        inputtext.attr('value',value.id);\n\n\n                    }).fail(function (jqXHR, textStatus, errorThrown) {\n\n                    alert('Error al actualizar imagen!!');\n\n                }).always(function () {\n\n\n                });\n\n            }\n\n\n        });\n\n\n    }\n\n\n    function create_new_div() {\n\n        var newImg = clearFormImg;\n\n        console.log('clearFormImg tiene: '+clearFormImg);\n\n        $('.container_images').append(newImg);\n\n\n\n        $('.content_file').find('.file').unwrap('<div></div>');\n\n\n    }\n\n    function print_file(fileImg) {\n\n        var x=0;\n\n        if (fileImg.parent('.file').hasClass('dragActive')) {\n            var temp = 1;\n        }\n\n        var filesSelected = fileImg[0].files[0];\n\n        if (filesSelected) {\n\n            var fileReader = new FileReader();\n\n            fileReader.onload = function (fileLoadedEvent) {\n\n                var srcData = fileLoadedEvent.target.result; // <--- data: base64\n\n\n                fileImg.parent('.file').find('.image').css({\n                    'background': 'url(' + srcData + ')',\n                });\n\n\n                if (!temp) {\n\n                    console.log(\"Entro x: \"+x);\n\n                    create_new_div();\n\n                }\n\n            }\n\n            fileReader.readAsDataURL(filesSelected);\n\n            fileImg.parent('.file').addClass('dragActive');\n\n\n        }\n\n    }\n\n    // Methods the Send request Ajax\n\n    function send_ajax(type, url, data) {\n\n        var ajaxOptions =\n\n        {\n\n            type: type,\n            url: url,\n            data: data,\n            contentType: false,\n            processData: false,\n            dataType: \"json\",\n            cache: false,\n            beforeSend: function () {\n\n                console.log(\"enviando\");\n\n            },\n\n\n        }\n\n        return ajaxOptions;\n\n    }\n\n    function delete_image() {\n        $('html').on('click','.add-delete ', function (event) {\n\n            var delete_file = $(this).parents('.file');\n            var input_with_id = delete_file.find('.id_img');\n            var id_delete = input_with_id.val();\n\n\n            if(confirm('¿eliminar?')){\n\n                var formData2 = new FormData();\n                console.log(\"id a eliminar: \"+id_delete);\n                console.log(\"Esto es lo que guarda el token: \"+token);\n                formData2.append('_token', token);\n                formData2.append('_method', 'delete');\n                formData2.append('id', id_delete);\n\n                $.ajax(send_ajax('POST', '../../images/destroy', formData2))\n                    .done(function (value, status, xhr) {\n\n                        console.log('Eliminado correctamente');\n\n                    }).fail(function (jqXHR, textStatus, errorThrown) {\n\n                    alert('Error!!');\n\n                }).always(function () {\n\n\n                });\n\n                // Delete of the DOOM\n                delete_file.fadeOut('fast');\n                delete_file.remove();\n\n            }\n\n            event.stopPropagation();\n\n        });\n\n    }\n\n\n\n    load_image();\n    load_images_front();\n    delete_image();\n}","\n//----------------------------------\n//----------------------------------\n//----------------------------------\nfunction always(){\n\n}\nfunction oneTime(){\n\n    //dropZone();\n    files();\n    active_sortable();\n\n}\nfunction lastTime(){\n}\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n$(document).ready(function() {\n    //-- No MOD----------------------------------//\n    always();\n    window.addEventListener(\"resize\", always);\n    //-- No MOD----------------------------------//\n    oneTime();\n});\n//----------------------------------------------------------//\n$(window).load(function() {\n    //-- No MOD----------------------------------//\n    always();\n    window.addEventListener(\"resize\", always);\n    //-- No MOD----------------------------------//\n    lastTime();\n});\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n//-------------------------------------------------------------------------------------//\n"],"sourceRoot":"/source/"}